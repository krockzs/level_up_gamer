<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LevelUp</title>
    <!-- Fuente letra -->
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Roboto:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- mapa de eventos -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

</head>

<body>
    <header class="primero">
        <nav class="nav">
            <a class="logo-nav" href="#">
                <img src="imagenes/Logo/LOGO.png" alt="LevelUp" />
                <span>LevelUp</span>
            </a>
            <ul class="nav-links">
                <li><a href="#productos">Productos</a></li>
                <li><a href="#comunidad">Comunidad</a></li>
                <li><a href="#eventos">Eventos</a></li>
                <li><a href="#contacto">Soporte</a></li>
            </ul>
            <a class="btn-whatsapp" target="_blank" rel="noopener"
                href="https://wa.me/56912345678?text=Hola%20vengo%20desde%20LevelUp%20y%20necesito%20soporte%20técnico.">
                WhatsApp soporte
            </a>
        </nav>

        <section class="segundo">
            <h1>Tienda De Articulos Gamer</h1>
            <p>Ofertas, noticias gamer, guías y eventos para ganar puntos LevelUp.</p>
            <div class="filters">
                <input id="q" type="search" placeholder="Buscar producto..." aria-label="Buscar producto" />
                <select id="category" aria-label="Filtrar por categoría">
                    <option value="all">Todas las categorías</option>
                    <option>Juegos de Mesa</option>
                    <option>Accesorios</option>
                    <option>Consolas</option>
                    <option>Computadores Gamers</option>
                    <option>Sillas Gamers</option>
                    <option>Mouse</option>
                    <option>Mousepad</option>
                    <option>Poleras Personalizadas</option>
                    <option>Polerones Gamers Personalizados</option>
                </select>
            </div>
        </section>
    </header>

    <main>
        <section id="productos" class="section">
            <h2 class="section-title">Productos</h2>
            <p class="section-subtitle">Filtra por categoría, busca por nombre o código.</p>
            <div class="grid">
                <article class="card" data-name="Catan" data-code="JM001" data-category="Juegos de Mesa">
                    <div class="media">
                        <img src="imagenes/JuegosDeMesa/imagen_2025-09-06_023241419.avif" alt="Catan">
                    </div>
                    <div class="content" style="padding:12px;">
                        <span class="badge">Juegos de Mesa</span>
                        <h3><a href="product.html?code=JM001">Catan</a></h3>
                        <div class="price">$29.990</div>
                        <div class="meta">Código: JM001</div>
                    </div>
                </article>

                <article class="card" data-name="Carcassonne" data-code="JM002" data-category="Juegos de Mesa">
                    <div class="media">
                        <img src="imagenes/JuegosDeMesa/carcassonne1.avif" alt="Carcassonne">
                    </div>
                    <div class="content" style="padding:12px;">
                        <span class="badge">Juegos de Mesa</span>
                        <h3><a href="product.html?code=JM002">Carcassonne</a></h3>
                        <div class="price">$24.990</div>
                        <div class="meta">Código: JM002</div>
                    </div>
                </article>

                <article class="card" data-name="Control Xbox Series X" data-code="AC001" data-category="Accesorios">
                    <div class="media">
                        <img src="imagenes/Accesorios/conxbox1.avif" alt="Control Xbox Series X">
                    </div>
                    <div class="content" style="padding:12px;">
                        <span class="badge">Accesorios</span>
                        <h3><a href="product.html?code=AC001">Control Xbox Series X</a></h3>
                        <div class="price">$59.990</div>
                        <div class="meta">Código: AC001</div>
                    </div>
                </article>

                <article class="card" data-name="HyperX Cloud II" data-code="AC002" data-category="Accesorios">
                    <div class="media">
                        <img src="imagenes/Accesorios/hyper1.avif" alt="HyperX Cloud II">
                    </div>
                    <div class="content" style="padding:12px;">
                        <span class="badge">Accesorios</span>
                        <h3><a href="product.html?code=AC002">HyperX Cloud II</a></h3>
                        <div class="price">$79.990</div>
                        <div class="meta">Código: AC002</div>
                    </div>
                </article>

                <article class="card" data-name="PlayStation 5" data-code="CO001" data-category="Consolas">
                    <div class="media">
                        <img src="imagenes/Consolas/play51.avif" alt="PlayStation 5">
                    </div>
                    <div class="content" style="padding:12px;">
                        <span class="badge">Consolas</span>
                        <h3><a href="product.html?code=CO001">PlayStation 5</a></h3>
                        <div class="price">$549.990</div>
                        <div class="meta">Código: CO001</div>
                    </div>
                </article>

                <article class="card" data-name="PC Gamer ASUS ROG Strix" data-code="CG001"
                    data-category="Computadores Gamers">
                    <div class="media">
                        <img src="imagenes/ComputadoresGamers/gamer1.avif" alt="PC Gamer ASUS ROG Strix">
                    </div>
                    <div class="content" style="padding:12px;">
                        <span class="badge">Computadores Gamers</span>
                        <h3><a href="product.html?code=CG001">PC Gamer ASUS ROG Strix</a></h3>
                        <div class="price">$1.299.990</div>
                        <div class="meta">Código: CG001</div>
                    </div>
                </article>

                <article class="card" data-name="Secretlab Titan" data-code="SG001" data-category="Sillas Gamers">
                    <div class="media">
                        <img src="imagenes/SillasGamers/silla1.avif" alt="Secretlab Titan">
                    </div>
                    <div class="content" style="padding:12px;">
                        <span class="badge">Sillas Gamers</span>
                        <h3><a href="product.html?code=SG001">Secretlab Titan</a></h3>
                        <div class="price">$349.990</div>
                        <div class="meta">Código: SG001</div>
                    </div>
                </article>

                <article class="card" data-name="Logitech G502 HERO" data-code="MS001" data-category="Mouse">
                    <div class="media">
                        <img src="imagenes/Mouse/mousel1.avif" alt="Logitech G502 HERO">
                    </div>
                    <div class="content" style="padding:12px;">
                        <span class="badge">Mouse</span>
                        <h3><a href="product.html?code=MS001">Logitech G502 HERO</a></h3>
                        <div class="price">$49.990</div>
                        <div class="meta">Código: MS001</div>
                    </div>
                </article>

                <article class="card" data-name="Razer Goliathus Chroma" data-code="MP001" data-category="Mousepad">
                    <div class="media">
                        <img src="imagenes/Mousepad/mpad1.avif" alt="Razer Goliathus Chroma">
                    </div>
                    <div class="content" style="padding:12px;">
                        <span class="badge">Mousepad</span>
                        <h3><a href="product.html?code=MP001">Razer Goliathus Chroma</a></h3>
                        <div class="price">$29.990</div>
                        <div class="meta">Código: MP001</div>
                    </div>
                </article>

                <article class="card" data-name="Polera 'Level-Up'" data-code="PP001"
                    data-category="Poleras Personalizadas">
                    <div class="media">
                        <img src="imagenes/PolerasPersonalizadas/lvlup1.avif" alt="Polera Level-Up">
                    </div>
                    <div class="content" style="padding:12px;">
                        <span class="badge">Poleras Personalizadas</span>
                        <h3><a href="product.html?code=PP001">Polera 'Level-Up'</a></h3>
                        <div class="price">$14.990</div>
                        <div class="meta">Código: PP001</div>
                    </div>
                </article>
            </div>
        </section>

        <section id="comunidad" class="section section-alt">
            <h2 class="section-title">Comunidad & Guías</h2>
            <div class="grid-3">
                <article class="card-post">
                    <img src="imagenes/noticia1.jpg" alt="Nuevo torneo gamer" loading="lazy">
                    <h3>Noticias Gamer</h3>
                    <p class="post-date">Publicado: 7 Sept 2025</p>
                    <p>Actualizaciones semanales con lanzamientos, parches y torneos internacionales.</p>
                    <a class="link" href="blog/noticias.html">Leer más</a>
                </article>

                <article class="card-post">
                    <img src="imagenes/guia1.jpg" alt="Optimizar setup gamer" loading="lazy">
                    <h3>Guías</h3>
                    <p class="post-date">Publicado: 5 Sept 2025</p>
                    <p>Consejos para optimizar tu setup, mejorar el rendimiento y la accesibilidad.</p>
                    <a class="link" href="blog/guias.html">Leer más</a>
                </article>

                <article class="card-post">
                    <img src="imagenes/comunidad.jpg" alt="Eventos gamer" loading="lazy">
                    <h3>Impacto Comunitario</h3>
                    <p class="post-date">Publicado: 3 Sept 2025</p>
                    <p>Descubre cómo tus compras apoyan eventos locales y comunidades gamer.</p>
                    <a class="link" href="blog/comunidad.html">Leer más</a>
                </article>
            </div>
        </section>

        <section id="eventos" class="section">
            <h2 class="section-title">Eventos con puntos LevelUp</h2>
            <p class="section-subtitle">Mapa nacional de eventos gamer (ejemplo sin backend).</p>
            <div id="map" class="map"></div>
            <div class="event-list" id="eventList"></div>
        </section>

        <section id="contacto" class="section section-alt">
            <h2 class="section-title">Soporte Técnico</h2>
            <form id="supportForm" novalidate class="form">
                <div class="field">
                    <label for="name">Nombre</label>
                    <input id="name" name="name" required minlength="3" maxlength="60" />
                    <small class="error"></small>
                </div>
                <div class="field">
                    <label for="email">Email</label>
                    <input id="email" name="email" type="email" required />
                    <small class="error"></small>
                </div>
                <div class="field">
                    <label for="issue">Descripción del problema</label>
                    <textarea id="issue" name="issue" required minlength="10" maxlength="500"></textarea>
                    <small class="error"></small>
                </div>
                <div class="field">
                    <label for="order">Código de producto (opcional)</label>
                    <input id="order" name="order" pattern="[A-Z]{2,3}[0-9]{3}" placeholder="Ej: JM001" />
                    <small class="hint">Formato: 2-3 letras + 3 números (p. ej., JM001).</small>
                    <small class="error"></small>
                </div>
                <button type="submit" class="btn-accent">Enviar</button>
                <a class="btn-outline" target="_blank" rel="noopener"
                    href="https://wa.me/56912345678?text=Hola%20necesito%20soporte%20técnico.">Chatear por WhatsApp</a>
            </form>
        </section>
    </main>

    <footer class="footer">
        <p>© 2025 LevelUp. Hecho para la comunidad gamer en Chile.</p>
    </footer>
    <script>
        (function () {
            const $ = sel => document.querySelector(sel);
            const q = $('#q');
            const cat = $('#category');
            const btn = document.getElementById('btnSearch') || document.getElementById('btnShare');

            // Contenedor y tarjetas (acepta #productos o #Productos)
            const container = document.getElementById('productos') || document.getElementById('Productos') || document;
            const cards = Array.from(container.querySelectorAll('.card'));

            // Normalizador (minúsculas y sin tildes)
            function normalize(s) {
                return (s || '')
                    .toLowerCase()
                    .normalize('NFD')
                    .replace(/\p{Diacritic}/gu, '');
            }

            // Obtiene texto desde posibles nodos
            function pickText(el, selectors) {
                for (const sel of selectors) {
                    const n = el.matches?.(sel) ? el : el.querySelector(sel);
                    if (n && n.textContent) return n.textContent.trim();
                }
                return '';
            }

            // Lee datos de una tarjeta (con fallback si no hay data-*)
            function readCard(card) {
                const name = card.dataset.name || pickText(card, ['[data-field="name"]', 'h3', '.name', '.title']);
                const code = card.dataset.code || pickText(card, ['[data-field="code"]', '.code']);
                const category =
                    card.dataset.category ||
                    pickText(card, ['[data-field="category"]', '.badge', '.category', '[data-cat]']) ||
                    'all';
                return { name, code, category };
            }

            // Aplica filtro
            function apply() {
                const nq = normalize(q?.value);
                const c = (cat?.value || 'all').trim();
                cards.forEach(card => {
                    const { name, code, category } = readCard(card);
                    const matchText = !nq || normalize(name).includes(nq) || normalize(code).includes(nq);
                    const matchCat = (c === 'all') || category === c;
                    card.style.display = (matchText && matchCat) ? '' : 'none';
                });
            }

            // Listeners
            if (q) q.addEventListener('input', apply);
            if (cat) cat.addEventListener('change', apply);
            if (btn) btn.addEventListener('click', e => { e.preventDefault(); apply(); });
            if (q) q.addEventListener('keydown', e => { if (e.key === 'Enter') { e.preventDefault(); apply(); } });

            // Primer pintado
            apply();
        })();
    </script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script>
        (function () {
            // 🎯 Eventos (puedes agregar más)
            const LEVELUP_EVENTS = [
                { name: 'Evento LevelUp', pts: 120, lat: -33.694039302686, lng: -71.21427093488575 }
            ];

            // 🗺️ Inicializa mapa
            const map = L.map('map', { zoomControl: true });
            const tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contrib.',
                maxZoom: 19
            }).addTo(map);

            // 📍 Marcadores + lista
            const bounds = L.latLngBounds([]);
            const list = document.getElementById('eventList');
            list.innerHTML = '';

            LEVELUP_EVENTS.forEach(ev => {
                const pos = [ev.lat, ev.lng];
                const marker = L.marker(pos).addTo(map).bindPopup(
                    `<strong>${ev.name}</strong><br>Puntos: ${ev.pts}`
                );

                bounds.extend(pos);

                // Item clickeable en la lista
                const item = document.createElement('div');
                item.className = 'event-item';
                item.tabIndex = 0;
                item.textContent = `${ev.name} — ${ev.pts} pts`;
                item.addEventListener('click', () => {
                    map.setView(pos, 15);
                    marker.openPopup();
                });
                item.addEventListener('keypress', e => {
                    if (e.key === 'Enter' || e.key === ' ') item.click();
                });
                list.appendChild(item);
            });

            // 📏 Ajusta vista
            if (LEVELUP_EVENTS.length > 1) {
                map.fitBounds(bounds, { padding: [24, 24] });
            } else if (LEVELUP_EVENTS.length === 1) {
                map.setView(bounds.getCenter(), 15);
            } else {
                // fallback: Santiago centro
                map.setView([-33.45, -70.65], 12);
            }
        })();
    </script>
    <!-- Modal accesible -->
<dialog id="formDialog">
  <form method="dialog" class="modal">
    <h3 id="dialogTitle">Estado del envío</h3>
    <p id="dialogMsg"></p>
    <div class="actions">
      <button class="btn-accent">Cerrar</button>
    </div>
  </form>
</dialog>

<script>
(function () {
  const form = document.getElementById('supportForm');
  const dlg  = document.getElementById('formDialog');
  const dlgTitle = document.getElementById('dialogTitle');
  const dlgMsg   = document.getElementById('dialogMsg');

  // Helpers
  const $field = (input) => input.closest('.field');
  const setErr = (input, msg) => {
    const f = $field(input);
    if (!f) return;
    const small = f.querySelector('.error');
    if (small) small.textContent = msg || '';
    input.setAttribute('aria-invalid', msg ? 'true' : 'false');
  };
  const trimVal = (el) => { if (typeof el.value === 'string') el.value = el.value.trim(); };

  // Reglas
  function validateName(input) {
    trimVal(input);
    if (!input.value) return 'El nombre es obligatorio.';
    if (input.value.length < 3) return 'Mínimo 3 caracteres.';
    if (input.value.length > 60) return 'Máximo 60 caracteres.';
    return '';
  }
  function validateEmail(input) {
    trimVal(input);
    if (!input.value) return 'El email es obligatorio.';
    if (!input.checkValidity()) return 'Ingresa un email válido (ej: nombre@dominio.cl).';
    return '';
  }
  function validateIssue(input) {
    trimVal(input);
    if (!input.value) return 'Describe el problema.';
    if (input.value.length < 10) return 'Mínimo 10 caracteres.';
    if (input.value.length > 500) return 'Máximo 500 caracteres.';
    return '';
  }
  function validateOrder(input) {
    trimVal(input);
    if (!input.value) return ''; // opcional
    const ok = /^[A-Z]{2,3}[0-9]{3}$/.test(input.value);
    return ok ? '' : 'Formato inválido. Ejemplo válido: JM001 o ABC123.';
  }

  // Validación campo a campo
  const validators = {
    name : validateName,
    email: validateEmail,
    issue: validateIssue,
    order: validateOrder
  };

  function validateForm() {
    let firstBad = null;
    let errors = 0;

    for (const [id, fn] of Object.entries(validators)) {
      const input = document.getElementById(id);
      const msg = fn(input);
      setErr(input, msg);
      if (msg && !firstBad) firstBad = input, errors++;
      else if (msg) errors++;
    }

    if (firstBad) firstBad.focus();
    return { ok: errors === 0, errors };
  }

  // Live validation
  form.addEventListener('input', (e) => {
    const id = e.target.id;
    if (validators[id]) {
      const msg = validators[id](e.target);
      setErr(e.target, msg);
    }
  });

  // Submit
  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const { ok, errors } = validateForm();
    if (!ok) {
      dlgTitle.textContent = 'Faltan datos';
      dlgMsg.textContent = `Revisa los campos marcados. (${errors} error${errors>1?'es':''})`;
      dlg.showModal();
      return;
    }

    // Simulación de envío (sin backend)
    setTimeout(() => {
      form.reset();
      // Limpia mensajes de error y estados
      form.querySelectorAll('.error').forEach(s => s.textContent = '');
      form.querySelectorAll('[aria-invalid="true"]').forEach(el => el.setAttribute('aria-invalid','false'));

      dlgTitle.textContent = 'Enviado con éxito';
      dlgMsg.textContent = 'Hemos recibido tu solicitud de soporte. Te contactaremos a la brevedad.';
      dlg.showModal();
    }, 200);
  });

  // Cerrar con Esc o click fuera
  dlg.addEventListener('click', (e) => {
    const rect = dlg.getBoundingClientRect();
    const inDialog = (
      e.clientX >= rect.left && e.clientX <= rect.right &&
      e.clientY >= rect.top  && e.clientY <= rect.bottom
    );
    if (!inDialog) dlg.close();
  });
})();
</script>

</body>

</html>